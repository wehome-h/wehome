# 第四节 类的成员之四：代码块

如果成员变量想要初始化的值不是一个硬编码的常量值，而是需要通过复杂的计算或读取文件、或读取运行环境信息等方式才能获取的一些值，该怎么办呢？此时，可以考虑代码块（或初始化块）。

<div class="br"></div>

代码块（或初始化块）的作用：

> 对 Java 类或对象进行初始化

<div class="br"></div>

代码块（或初始化块）的分类：

> - 一个类中代码块若有修饰符，则只能被 static 修饰，称为静态代码块（static block）
>
> - 没有使用 static 修饰的，为非静态代码块。

## 1、静态代码块

如果想要为静态变量初始化，可以直接在静态变量的声明后面直接赋值，也可以使用静态代码块。

### ① 语法格式

在代码块的前面加 static，就是静态代码块。

```java
[修饰符] class 类 {
    static {
        静态代码块
    }
}
```

### ② 静态代码块的特点

1.  可以有输出语句。

2.  可以对类的属性、类的声明进行初始化操作。

3.  不可以对非静态的属性初始化。即：不可以调用非静态的属性和方法。

4.  若有多个静态的代码块，那么按照从上到下的顺序依次执行。

5.  静态代码块的执行要先于非静态代码块。

6.  静态代码块随着类的加载而加载，且只执行一次。

::: code-group

```java [Chinese.java]
public class Chinese {

    private static String country;
    private String name;

    {
        System.out.println("非静态代码块, country = " + country);
    }

    static {
        country = "中国";
        System.out.println("静态代码块");
    }

    public Chinese(String name) {
        this.name = name;
    }

}
```

```java [TestStaticBlock.java]
public class TestStaticBlock {

    public static void main(String[] args) {
        Chinese c1 = new Chinese("张三");
        Chinese c2 = new Chinese("李四");
    }

}
```

:::

![](https://raw.githubusercontent.com/wehome-h/typora-images-repository/main/images/20240429161608.png)

## 2、非静态代码块

### ① 语法格式

```java
[修饰符] class 类 {

    {
        非静态代码块
    }

    [修饰符] 构造器名() {
        // 实例初始化代码
    }

    [修饰符] 构造器名(参数列表) {
        // 实例初始化代码
    }

}
```

### ② 非静态代码块的作用

和构造器一样，也是用于实例变量的初始化等操作。

### ③ 非静态代码块的意义

如果多个重载的构造器有公共代码，并且这些代码都是先于构造器其他代码执行的，那么可以将这部分代码抽取到非静态代码块中，减少冗余代码。

### ④ 非静态代码块的执行特点

1.  可以有输出语句。

2.  可以对类的属性、类的声明进行初始化操作。

3.  除了调用非静态的结构外，还可以调用静态的变量或方法。

4.  若有多个非静态的代码块，那么按照从上到下的顺序依次执行。

5.  每次创建对象的时候，都会执行依次。且先于构造器执行。

## 3、举例
